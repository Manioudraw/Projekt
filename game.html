<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport", content="width=device-width, initial-scale=1.0">
        <title>Vortexx</title>
        <link rel="stylesheet" href="game.css">
    </head>

    <body id="body">
        <!-- Canvas -->
        <canvas id="canvas"></canvas>

        <!-- Timer -->
        <p id="timer"></p>

        <!-- Audio -->
        <audio loop id="backgroundMusic"> 
            <source src="./audio/music/backgroundMusic.mp3" type="audio/mpeg"> 
            Dein Browser unterst√ºtzt die Audiodatei leider nicht.
        </audio>
        <audio id="punchWarrior"> <source src="./audio/soundFiles/punchWarrior.mp3" type="audio/mpeg"> </audio>
        <audio id="bossShot"> <source src="./audio/soundFiles/bossShot.mp3" type="audio/mpeg"> </audio>

        <button type="button" id="buttonAudio">Play</button>
        
        <script>
            function loadAudio(element) {
                var audioElement = document.getElementById(element);
                audioElement.volume = 0;

                if(parseFloat(localStorage.getItem(element)) != null) {
                    audioElement.volume = localStorage.getItem(element);
                }

                localStorage.setItem(element, audioElement.volume);
            }

            loadAudio("backgroundMusic");
            loadAudio("punchWarrior");
            loadAudio("bossShot");


            var myAudio = document.getElementById("backgroundMusic");
            var myControl = document.getElementById("buttonAudio");

            function switchState() {
                if (myAudio.paused == true) {
                    myAudio.play();
                    myControl.innerHTML = "Pause";
                } else {
                    myAudio.pause();
                    myControl.innerHTML = "Play";
                }
            }

            function checkKey(e) {
                if (e.keycode == 32 ) {
                    switchState();
                }
            }

            myControl.addEventListener('click', function() {
                switchState();
            }, false);

            window.addEventListener("keypress", checkKey, false);


            
            // if(localStorage.getItem("shot") != null) {
            //     var shotAvailable = localStorage.getItem("shot");
                
            //     if(shotAvailable) {
            //         bossShot.play();
            //         console.log(shotAvailable);
            //         shotAvailable = localStorage.getItem("shot");
            //         console.log("-----------------"+shotAvailable);
            //     }
            // }


            // document.addEventListener('click', playAudio);
            // document.addEventListener('keydown', playAudio);
        </script>

        <!-- JS-Dateien -->
        <script src="warrior.js"></script>
        <script src="enemy.js"></script>
        <script src="zombie.js"></script>
        <script src="boss.js"></script>
        <script src="game.js"></script>
        <script src="gui.js"></script>
        <script src="settingUpdate.js"></script>
        <script>
            // var audioContext = new(window.AudioContext || window.webkitAudioContext)();
            //     var audioElement = document.getElementById('testi');
            //     var audioSource = audioContext.createMediaElementSource(audioElement);
            //     // var gainNode = audioContext.createGain();
            //     // audioSource.connect(gainNode);
            //     // gainNode.connect(audioContext.destination);
            //     // gainNode.gain.value = 0.5;

            //     audioSource.connect(audioContext.destination);
            // function playAudio() {
            //     audioElement.play();
            // }
            

            // document.addEventListener('click', playAudio);
            
        </script>

        <!-- IMG-Dateien -->
        <img src="./images/warrior.png" alt="warrior" id="warrior"/>
        <img src="./images/warriorShot.png" alt="warriorBullet" id="warriorBullet"/>
        <img src="./images/zombie.png" alt="zombie" id="zombie"/>
        <img src="./images/boss.png" alt="boss" id="boss"/>
        <img src="./images/heart.png" alt="heart" id="heart"/>
        <img src="./images/heartDamage.png" alt="heartDamage" id="heartDamage"/>
        <img src="./images/settings.png" alt="settings" id="settings" onclick="window.open('settings.html', '_self')"/>
        <img src="./images/gamerules.png" alt="gamerules" id="gamerules" onclick="window.open('gamerules.html', '_self')"/>
    </body>
</html>