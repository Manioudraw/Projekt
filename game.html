<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport", content="width=device-width, initial-scale=1.0">
        <title>Vortexx</title>
        <link rel="stylesheet" href="game.css">
    </head>

    <body id="body">
        <!-- Canvas -->
        <canvas id="canvas"></canvas>

        <!-- Timer -->
        <p id="timer"></p>

        <!-- Audio -->
        <audio loop id="backgroundMusic"> 
            <source src="./audio/music/backgroundMusic.mp3" type="audio/mpeg"> 
            Dein Browser unterst√ºtzt die Audiodatei leider nicht.
        </audio>
        <audio id="punchWarrior"> <source src="./audio/soundFiles/warrior/punchWarrior.mp3" type="audio/mpeg"> </audio>
        <audio id="warriorHit"> <source src="./audio/soundFiles/warrior/warriorHit.mp3" type="audio/mpeg"> </audio>
        <audio id="bossShot"> <source src="./audio/soundFiles/enemies/bossShot.mp3" type="audio/mpeg"> </audio>
        <audio id="bossAppearance"> <source src="./audio/soundFiles/enemies/boss_appearance.mp3" type="audio/mpeg"> </audio>
        <audio id="bossCountdown"> <source src="./audio/soundFiles/enemies/boss_countdown.mp3" type="audio/mpeg"> </audio>
        <audio id="enemyHit"> <source src="./audio/soundFiles/enemies/enemyHit.mp3" type="audio/mpeg"> </audio>
        <audio id="enemyDeath"> <source src="./audio/soundFiles/enemies/enemyDeath.mp3" type="audio/mpeg"> </audio>
        <audio id="winning"> <source src="./audio/soundFiles/win.mp3" type="audio/mpeg"> </audio>
        <audio id="losing"> <source src="./audio/soundFiles/losing.mp3" type="audio/mpeg"> </audio>
        <audio id="border"> <source src="./audio/soundFiles/border.mp3" type="audio/mpeg"> </audio>

        <button type="button" id="buttonAudio">Play Audio</button>
        
        <script>
            function loadAudio(element) {
                var audioElement = document.getElementById(element);
                audioElement.volume = 0;
                if(parseFloat(localStorage.getItem(element)) != null) {
                    audioElement.volume = localStorage.getItem(element);
                }
                localStorage.setItem(element, audioElement.volume);
            }

            loadAudio("backgroundMusic");
            loadAudio("punchWarrior");
            loadAudio("warriorHit");
            loadAudio("bossShot");
            loadAudio("bossAppearance");
            loadAudio("bossCountdown");
            loadAudio("winning");
            loadAudio("losing");
            loadAudio("enemyDeath");
            loadAudio("enemyHit");
            loadAudio("border");
            


            var audio = document.getElementById("backgroundMusic");
            var button = document.getElementById("buttonAudio");
            var audioVolume = parseFloat(localStorage.getItem("backgroundMusic"));

            if(audioVolume != null) {
                audio.volume = audioVolume;
            } else {
                audio.volume = 0.2;
            }

            function switchState() {
                if (audio.paused == true) {
                    audio.play();
                    button.innerHTML = "Pause Audio";
                } else {
                    audio.pause();
                    button.innerHTML = "Play Audio";
                }
            }

            function checkKey(e) {
                if (e.keycode == 32 ) {
                    switchState();
                }
            }

            button.addEventListener('click', function() {
                switchState();
            }, false);

            window.addEventListener("keypress", checkKey, false);
        </script>

        <!-- JS-Dateien -->
        <script src="warrior.js"></script>
        <script src="enemy.js"></script>
        <script src="zombie.js"></script>
        <script src="boss.js"></script>
        <script src="game.js"></script>
        <script src="gui.js"></script>
        <script src="settingUpdate.js"></script>

        <!-- IMG-Dateien -->
        <img src="./images/warrior.png" alt="warrior" id="warrior"/>
        <img src="./images/warriorShot.png" alt="warriorBullet" id="warriorBullet"/>
        <img src="./images/zombie.png" alt="zombie" id="zombie"/>
        <img src="./images/boss.png" alt="boss" id="boss"/>
        <img src="./images/heart.png" alt="heart" id="heart"/>
        <img src="./images/bossShot.png" alt="heartDamage" id="heartDamage"/>
        <img src="./images/settings.png" alt="settings" id="settings" onclick="window.open('settings.html', '_self')"/>
        <img src="./images/gamerules.png" alt="gamerules" id="gamerules" onclick="window.open('gamerules.html', '_self')"/>
    </body>
</html>